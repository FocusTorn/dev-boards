---
globs: ['**/*.md']
alwaysApply: true
---

# Summary Formatting Rules

## 1. :: Summary Structure Template

### 1.1. :: Required Summary Format <!-- Start Fold -->

**✅ CORRECT - Use this exact structure for summaries**:

```markdown
# [TITLE OF SUMMARY]

## [TITLE OF FIRST SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

2. [Second Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

---

## [TITLE OF SECOND SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

2. [Second Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]
```

**❌ INCORRECT - Don't use these variations**:

```markdown
# **TITLE OF SUMMARY** <!-- Don't bold titles -->

## TITLE OF FIRST SECTION <!-- Don't skip numbering -->

- First Top Level Bullet <!-- Don't use asterisks for numbered lists -->
    - First Detail Bullet
    - Second Detail Bullet

2. Second Top Level Bullet <!-- Don't skip numbering -->
    - First Detail Bullet
    - Second Detail Bullet
```

**ℹ️ Rationale**: <!-- Start Fold -->

- Consistent structure ensures readability and scanning
- Numbered sections provide clear hierarchy
- Mixed bullet types (numbered + dash) create visual distinction
- Horizontal rules (`---`) separate major sections clearly
- 3-space indentation for detail bullets maintains visual hierarchy

<!-- Close Fold: Rationale -->

<!-- Close Fold: Required Summary Format -->

### 1.2. :: Summary Content Guidelines <!-- Start Fold -->

**✅ CORRECT - Follow these content rules**:

- **Title Brackets**: Use `[TITLE OF SUMMARY]` format for placeholder titles
- **Section Brackets**: Use `[TITLE OF SECTION]` format for placeholder sections
- **Bullet Brackets**: Use `[First Top Level Bullet]` format for placeholder bullets
- **Detail Brackets**: Use `[First Detail Bullet]` format for placeholder details
- **Consistent Indentation**: 3 spaces for detail bullets under numbered items
- **Section Separators**: Use `---` between major sections
- **Sequential Numbering**: Number sections and bullets sequentially

**❌ INCORRECT - Avoid these patterns**:

- Mixed indentation (2 spaces vs 3 spaces)
- Skipping numbers in sequences
- Using asterisks (`*`) for numbered lists
- Missing section separators
- Inconsistent bracket formatting

<!-- Close Fold: Summary Content Guidelines -->

### 1.3. :: Summary Trigger Phrases <!-- Start Fold -->

**When user requests any of these phrases, use the summary format**:

- "show a summary of..."
- "summarize..."
- "give me a summary..."
- "create a summary..."
- "provide a summary..."
- "write a summary..."
- "generate a summary..."

**Implementation**: Always wrap the summary in a markdown code block:

````markdown
```markdown
# [TITLE OF SUMMARY]

## [TITLE OF FIRST SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

2. [Second Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

---

## [TITLE OF SECOND SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

2. [Second Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]
```
````

<!-- Close Fold: Summary Trigger Phrases -->

### 1.4. :: Automatic High-Level Summary Detection <!-- Start Fold -->

**CRITICAL ENFORCEMENT**: Apply summary format when providing ANY of these content types:

- **Analysis Results**: When presenting findings from analysis tasks
- **Issue Lists**: When listing problems, issues, or inconsistencies found
- **Overview Content**: When giving high-level explanations of complex topics
- **Findings Reports**: When reporting on investigations or audits
- **Multi-Point Responses**: When providing structured information across multiple categories
- **Comprehensive Reviews**: When reviewing documents, code, or systems

**Detection Triggers**:

- Presenting multiple categories of information
- Using phrases like "issues found," "problems identified," "analysis shows"
- Providing structured lists across different topics
- Giving overviews of complex subjects
- Reporting findings from investigations

**Implementation**: Automatically wrap in summary format template when these patterns are detected.

<!-- Close Fold: Automatic High-Level Summary Detection -->

### 1.5. :: Response Type Auto-Detection <!-- Start Fold -->

**When I provide structured information, I automatically apply summary format:**

- **Analysis responses** → Summary format
- **Issue identification** → Summary format
- **Multi-category information** → Summary format
- **Comprehensive reviews** → Summary format
- **Findings reports** → Summary format
- **Structured explanations** → Summary format

<!-- Close Fold: Response Type Auto-Detection -->

### 1.6. :: Content Structure Auto-Formatting <!-- Start Fold -->

**CRITICAL**: If my response contains:

- Multiple numbered/bulleted sections
- Categorized information (issues, problems, findings)
- Structured analysis results
- Multi-topic explanations
- Comprehensive reviews

**THEN**: Automatically apply summary format template without user request.

**Rationale**: Structured, multi-category responses benefit from consistent summary formatting for readability and organization.

<!-- Close Fold: Content Structure Auto-Formatting -->

### 1.7. :: Nesting Code Blocks Within Summaries <!-- Start Fold -->

**✅ CORRECT - Use 4 backticks to nest code blocks within the 3-backtick markdown summary**:

`````markdown
````markdown
# [TITLE OF SUMMARY]

## [TITLE OF SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - Add the following configuration:

```ssh-config
Host RPi-Clean
    HostName 192.168.1.159
    User pi
```
````
`````

2. [Second Top Level Bullet]
    - [First Detail Bullet]

```

```

`````

**❌ INCORRECT - Don't use 3 backticks to nest code (it will close the outer fence)**:

````markdown
# [TITLE OF SUMMARY]

## [TITLE OF SECTION]

1. [First Top Level Bullet]
    - Add the following configuration:

```ssh-config
Host RPi-Clean
    HostName 192.168.1.159
```
````

<!-- This closes the outer markdown fence! -->

```

**ℹ️ Rationale**: <!-- Start Fold -->

- The outer summary fence uses 3 backticks
- Nested code blocks inside must use 4 backticks
- This prevents the nested code block from closing the outer fence
- Always specify the language type after the opening 4 backticks (e.g., `ssh-config`, `bash`, `powershell`, `python`)
- Close nested code blocks with exactly 4 backticks

<!-- Close Fold: Rationale -->

<!-- Close Fold: Nesting Code Blocks Within Summaries -->

### 1.8. :: Plain Text Summary Format (Retro Style) <!-- Start Fold -->

**When user requests a plain text/ASCII summary format, use this retro style**:

**✅ CORRECT - Plain text summary with ASCII styling**:

```text
╔═══════════════════════════════════════════════════════════════════════════╗
║                          [TITLE OF SUMMARY]                               ║
╚═══════════════════════════════════════════════════════════════════════════╝

┌───────────────────────────────────────────────────────────────────────────┐
│ [SECTION 1 TITLE]                                                         │
└───────────────────────────────────────────────────────────────────────────┘

  1. [First Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet]

  2. [Second Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet]

═══════════════════════════════════════════════════════════════════════════

┌───────────────────────────────────────────────────────────────────────────┐
│ [SECTION 2 TITLE]                                                         │
└───────────────────────────────────────────────────────────────────────────┘

  1. [First Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet]

  2. [Second Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet]

═══════════════════════════════════════════════════════════════════════════
```

**Nesting Code Blocks in Plain Text Summaries**:

```text
┌───────────────────────────────────────────────────────────────────────────┐
│ [SECTION TITLE]                                                           │
└───────────────────────────────────────────────────────────────────────────┘

  1. [First Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet with code example]:

       ┌─────────────────────────────────────────────────────────────────┐
       │ Host RPi-Clean                                                  │
       │     HostName 192.168.1.159                                      │
       │     User pi                                                     │
       │     IdentityFile C:\Users\<YourUsername>\.ssh\rpi_clean        │
       └─────────────────────────────────────────────────────────────────┘

  2. [Second Top Level Bullet]
     • [First Detail Bullet]
```

**ℹ️ Formatting Rules**:

- **Title Box**: Use double-line box (╔═╗╚═╝) for main title
- **Section Box**: Use single-line box (┌─┐└─┘) for section headers
- **Major Separator**: Use double-line (═══) between major sections
- **Bullet Points**: Use • (bullet) for detail items
- **Code Boxes**: Use single-line box for nested code/config examples
- **Indentation**: 2 spaces for numbered items, 5 spaces for bullets
- **Consistent Width**: Keep boxes at consistent width (75 chars recommended)

**Trigger Phrases**:

- "plain text summary"
- "ASCII summary"
- "text file summary"
- "retro style summary"
- "no markdown summary"

<!-- Close Fold: Plain Text Summary Format -->

### 1.9. :: Additional Guidelines <!-- Start Fold -->

- **Always wrap in code block**: Use triple backticks with `markdown` language identifier
- **Maintain placeholder format**: Keep brackets for all placeholder text
- **Preserve structure**: Don't modify the template structure
- **Consistent spacing**: Maintain exact spacing and indentation
- **Section limits**: Use 2-3 sections maximum for readability
- **Bullet limits**: Use 2-3 bullets per section maximum
- **Detail limits**: Use 2-3 details per bullet maximum
- **Nested code blocks**: Use 4 backticks with language type (see section 1.7)
- **Plain text format**: Use ASCII box drawing for retro style (see section 1.8)

<!-- Close Fold: Additional Guidelines -->

---
```
`````
