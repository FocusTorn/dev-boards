---
alwaysApply: true
---

# Summary Formatting Rules

## **CRITICAL EXECUTION DIRECTIVE**

**AI Agent Directive**: Follow summary formatting rules exactly for ALL summary requests and structured information responses.

**MANDATORY EXECUTION PROTOCOL**:

1. **NO DEVIATION**: All summary formatting rules must be followed exactly as written
2. **NO SKIPPING**: No steps may be skipped, abbreviated, or modified
3. **NO SELECTIVE COMPLIANCE**: All rules apply to ALL summary responses
4. **FAILURE TO COMPLY**: Violating these rules constitutes a critical protocol violation
5. **AUTOMATIC DETECTION**: Apply format automatically when summary triggers are detected (see section 1.3, 1.4, 1.5, 1.6)

## 1. :: Summary Structure Template

### 1.1. :: Required Summary Format <!-- Start Fold -->

**✅ CORRECT - Use this exact structure for summaries**:

```markdown
# [TITLE OF SUMMARY]

## [TITLE OF FIRST SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

2. [Second Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

---

## [TITLE OF SECOND SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

2. [Second Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]
```

**❌ INCORRECT - Don't use these variations**:

```markdown
# **TITLE OF SUMMARY** <!-- Don't bold titles -->

## TITLE OF FIRST SECTION <!-- Don't skip numbering -->

- First Top Level Bullet <!-- Don't use asterisks for numbered lists -->
    - First Detail Bullet
    - Second Detail Bullet

2. Second Top Level Bullet <!-- Don't skip numbering -->
    - First Detail Bullet
    - Second Detail Bullet
```

**ℹ️ Rationale**: <!-- Start Fold -->

- Consistent structure ensures readability and scanning
- Numbered sections provide clear hierarchy
- Mixed bullet types (numbered + dash) create visual distinction
- Horizontal rules (`---`) separate major sections clearly
- 3-space indentation for detail bullets maintains visual hierarchy

<!-- Close Fold: Rationale -->

<!-- Close Fold: Required Summary Format -->

### 1.2. :: Summary Content Guidelines <!-- Start Fold -->

**✅ CORRECT - Follow these content rules**:

- **Title Brackets**: Use `[TITLE OF SUMMARY]` format for placeholder titles
- **Section Brackets**: Use `[TITLE OF SECTION]` format for placeholder sections
- **Bullet Brackets**: Use `[First Top Level Bullet]` format for placeholder bullets
- **Detail Brackets**: Use `[First Detail Bullet]` format for placeholder details
- **Consistent Indentation**: 3 spaces for detail bullets under numbered items
- **Section Separators**: Use `---` between major sections
- **Sequential Numbering**: Number sections and bullets sequentially

**❌ INCORRECT - Avoid these patterns**:

- Mixed indentation (2 spaces vs 3 spaces)
- Skipping numbers in sequences
- Using asterisks (`*`) for numbered lists
- Missing section separators
- Inconsistent bracket formatting

<!-- Close Fold: Summary Content Guidelines -->

### 1.3. :: Summary Trigger Phrases <!-- Start Fold -->

**✅ CORRECT - MANDATORY: When user requests any of these phrases, use the summary format**:

- "show a summary of..." → **MUST** apply summary format
- "summarize..." → **MUST** apply summary format
- "give me a summary..." → **MUST** apply summary format
- "create a summary..." → **MUST** apply summary format
- "provide a summary..." → **MUST** apply summary format
- "write a summary..." → **MUST** apply summary format
- "generate a summary..." → **MUST** apply summary format
- "show me a summary" → **MUST** apply summary format
- "what's the summary" → **MUST** apply summary format
- Any phrase containing "summary" → **MUST** apply summary format

**❌ INCORRECT - Don't ignore trigger phrases**:

- Providing plain text response when user asks for "summary"
- Using different formatting when summary is requested
- Skipping the markdown code block wrapper

**MANDATORY Implementation**: Always wrap the summary in a markdown code block:

````markdown
```markdown
# [TITLE OF SUMMARY]

## [TITLE OF FIRST SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

2. [Second Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

---

## [TITLE OF SECOND SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]

2. [Second Top Level Bullet]
    - [First Detail Bullet]
    - [Second Detail Bullet]
```
````

<!-- Close Fold: Summary Trigger Phrases -->

### 1.4. :: Automatic High-Level Summary Detection <!-- Start Fold -->

**✅ CORRECT - MANDATORY ENFORCEMENT**: Apply summary format when providing ANY of these content types:

- **Analysis Results**: When presenting findings from analysis tasks → **MUST** use summary format
- **Issue Lists**: When listing problems, issues, or inconsistencies found → **MUST** use summary format
- **Overview Content**: When giving high-level explanations of complex topics → **MUST** use summary format
- **Findings Reports**: When reporting on investigations or audits → **MUST** use summary format
- **Multi-Point Responses**: When providing structured information across multiple categories → **MUST** use summary format
- **Comprehensive Reviews**: When reviewing documents, code, or systems → **MUST** use summary format

**✅ CORRECT - Detection Triggers (AUTOMATIC APPLICATION REQUIRED)**:

- Presenting multiple categories of information → **AUTOMATICALLY** apply summary format
- Using phrases like "issues found," "problems identified," "analysis shows" → **AUTOMATICALLY** apply summary format
- Providing structured lists across different topics → **AUTOMATICALLY** apply summary format
- Giving overviews of complex subjects → **AUTOMATICALLY** apply summary format
- Reporting findings from investigations → **AUTOMATICALLY** apply summary format

**❌ INCORRECT - Don't skip format application**:

- Providing plain text when analysis results are presented
- Using different formatting for findings reports
- Ignoring detection triggers

**MANDATORY Implementation**: Automatically wrap in summary format template when these patterns are detected. **NO EXCEPTIONS**.

<!-- Close Fold: Automatic High-Level Summary Detection -->

### 1.5. :: Response Type Auto-Detection <!-- Start Fold -->

**When I provide structured information, I automatically apply summary format:**

- **Analysis responses** → Summary format
- **Issue identification** → Summary format
- **Multi-category information** → Summary format
- **Comprehensive reviews** → Summary format
- **Findings reports** → Summary format
- **Structured explanations** → Summary format

<!-- Close Fold: Response Type Auto-Detection -->

### 1.6. :: Content Structure Auto-Formatting <!-- Start Fold -->

**✅ CORRECT - MANDATORY AUTO-FORMATTING**: If my response contains:

- Multiple numbered/bulleted sections → **AUTOMATICALLY** apply summary format
- Categorized information (issues, problems, findings) → **AUTOMATICALLY** apply summary format
- Structured analysis results → **AUTOMATICALLY** apply summary format
- Multi-topic explanations → **AUTOMATICALLY** apply summary format
- Comprehensive reviews → **AUTOMATICALLY** apply summary format

**THEN**: **MUST** automatically apply summary format template without user request. **NO EXCEPTIONS**.

**❌ INCORRECT - Don't skip auto-formatting**:

- Providing plain text when response contains multiple sections
- Using different formatting for categorized information
- Ignoring structure detection

**Rationale**: Structured, multi-category responses benefit from consistent summary formatting for readability and organization.

<!-- Close Fold: Content Structure Auto-Formatting -->

### 1.7. :: Nesting Code Blocks Within Summaries <!-- Start Fold -->

**✅ CORRECT - Use 4 backticks to nest code blocks within the 3-backtick markdown summary**:

`````markdown
````markdown
# [TITLE OF SUMMARY]

## [TITLE OF SECTION]

1. [First Top Level Bullet]
    - [First Detail Bullet]
    - Add the following configuration:

```ssh-config
Host RPi-Clean
    HostName 192.168.1.159
    User pi
```
````
`````

2. [Second Top Level Bullet]
    - [First Detail Bullet]

```

```

`````

**❌ INCORRECT - Don't use 3 backticks to nest code (it will close the outer fence)**:

````markdown
# [TITLE OF SUMMARY]

## [TITLE OF SECTION]

1. [First Top Level Bullet]
    - Add the following configuration:

```ssh-config
Host RPi-Clean
    HostName 192.168.1.159
```
````

<!-- This closes the outer markdown fence! -->

```

**ℹ️ Rationale**: <!-- Start Fold -->

- The outer summary fence uses 3 backticks
- Nested code blocks inside must use 4 backticks
- This prevents the nested code block from closing the outer fence
- Always specify the language type after the opening 4 backticks (e.g., `ssh-config`, `bash`, `powershell`, `python`)
- Close nested code blocks with exactly 4 backticks

<!-- Close Fold: Rationale -->

<!-- Close Fold: Nesting Code Blocks Within Summaries -->

### 1.8. :: Plain Text Summary Format (Retro Style) <!-- Start Fold -->

**When user requests a plain text/ASCII summary format, use this retro style**:

**✅ CORRECT - Plain text summary with ASCII styling**:

```text
╔═══════════════════════════════════════════════════════════════════════════╗
║                          [TITLE OF SUMMARY]                               ║
╚═══════════════════════════════════════════════════════════════════════════╝

┌───────────────────────────────────────────────────────────────────────────┐
│ [SECTION 1 TITLE]                                                         │
└───────────────────────────────────────────────────────────────────────────┘

  1. [First Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet]

  2. [Second Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet]

═══════════════════════════════════════════════════════════════════════════

┌───────────────────────────────────────────────────────────────────────────┐
│ [SECTION 2 TITLE]                                                         │
└───────────────────────────────────────────────────────────────────────────┘

  1. [First Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet]

  2. [Second Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet]

═══════════════════════════════════════════════════════════════════════════
```

**Nesting Code Blocks in Plain Text Summaries**:

```text
┌───────────────────────────────────────────────────────────────────────────┐
│ [SECTION TITLE]                                                           │
└───────────────────────────────────────────────────────────────────────────┘

  1. [First Top Level Bullet]
     • [First Detail Bullet]
     • [Second Detail Bullet with code example]:

       ┌─────────────────────────────────────────────────────────────────┐
       │ Host RPi-Clean                                                  │
       │     HostName 192.168.1.159                                      │
       │     User pi                                                     │
       │     IdentityFile C:\Users\<YourUsername>\.ssh\rpi_clean        │
       └─────────────────────────────────────────────────────────────────┘

  2. [Second Top Level Bullet]
     • [First Detail Bullet]
```

**ℹ️ Formatting Rules**:

- **Title Box**: Use double-line box (╔═╗╚═╝) for main title
- **Section Box**: Use single-line box (┌─┐└─┘) for section headers
- **Major Separator**: Use double-line (═══) between major sections
- **Bullet Points**: Use • (bullet) for detail items
- **Code Boxes**: Use single-line box for nested code/config examples
- **Indentation**: 2 spaces for numbered items, 5 spaces for bullets
- **Consistent Width**: Keep boxes at consistent width (75 chars recommended)

**Trigger Phrases**:

- "plain text summary"
- "ASCII summary"
- "text file summary"
- "retro style summary"
- "no markdown summary"

<!-- Close Fold: Plain Text Summary Format -->

### 1.9. :: Additional Guidelines <!-- Start Fold -->

**✅ CORRECT - MANDATORY REQUIREMENTS**:

- **Always wrap in code block**: **MUST** use triple backticks with `markdown` language identifier
- **Maintain placeholder format**: Keep brackets for all placeholder text
- **Preserve structure**: Don't modify the template structure
- **Consistent spacing**: Maintain exact spacing and indentation (3 spaces for detail bullets)
- **Section limits**: Use 2-3 sections maximum for readability
- **Bullet limits**: Use 2-3 bullets per section maximum
- **Detail limits**: Use 2-3 details per bullet maximum
- **Nested code blocks**: Use 4 backticks with language type (see section 1.7)
- **Plain text format**: Use ASCII box drawing for retro style (see section 1.8)

**❌ INCORRECT - Formatting violations**:

- Missing markdown code block wrapper
- Wrong indentation (not 3 spaces for detail bullets)
- Using asterisks (*) instead of numbered lists
- Missing section separators (`---`)
- Skipping the format entirely

## **ANTI-PATTERNS**

### **❌ Summary Formatting Violations**

- ❌ **Ignoring Trigger Phrases** - Don't skip format when user requests "summary"
- ❌ **Missing Code Block Wrapper** - Don't provide plain text without markdown code block
- ❌ **Wrong Indentation** - Don't use 2 spaces or 4 spaces (must be 3 spaces for detail bullets)
- ❌ **Using Asterisks** - Don't use `*` for numbered lists (must use `1.`, `2.`, etc.)
- ❌ **Missing Section Separators** - Don't skip `---` between major sections
- ❌ **Skipping Auto-Detection** - Don't ignore automatic format triggers (analysis, findings, etc.)
- ❌ **Inconsistent Formatting** - Don't mix formats within the same summary

## **QUALITY GATES**

- [ ] **Trigger Detection**: Summary format applied when user requests summary
- [ ] **Code Block Wrapper**: Summary wrapped in triple backticks with `markdown` identifier
- [ ] **Numbered Lists**: Top-level items use numbered lists (1., 2., etc.)
- [ ] **Dash Bullets**: Detail items use dash bullets (-) with 3-space indentation
- [ ] **Section Separators**: Major sections separated by `---`
- [ ] **Auto-Detection**: Format automatically applied for analysis, findings, reviews
- [ ] **Consistent Structure**: All summaries follow the same template structure

<!-- Close Fold: Additional Guidelines -->

---
```
`````
