---
alwaysApply: true
---

# Terminal Output Formatting Rules

## **CRITICAL EXECUTION DIRECTIVE**

**AI Agent Directive**: Follow terminal output formatting rules exactly for all command-line scripts and terminal interfaces.

**MANDATORY EXECUTION PROTOCOL**:

1. **NO DEVIATION**: All formatting rules must be followed exactly as written
2. **NO SKIPPING**: No steps may be skipped, abbreviated, or modified
3. **NO SELECTIVE COMPLIANCE**: All rules apply to all terminal output
4. **FAILURE TO COMPLY**: Violating these rules constitutes a critical protocol violation

## **COLORATION AND ICONS FOR MESSAGES**

### **Status Message Colors and Icons**

#### **1. :: Color Constants**

**✅ CORRECT - Use ANSI 256-color codes for status messages**:

```python
# Status message colors (ANSI 256-color codes)
COLOR_ERROR = "\x1B[38;5;196m"      # Bright red (#ff0000) - Code 196
COLOR_WARNING = "\x1B[38;5;226m"   # Bright yellow (#ffff00) - Code 226
COLOR_INFO = "\x1B[38;5;39m"       # Bright blue (#00afff) - Code 39
COLOR_SUCCESS = "\x1B[38;5;46m"    # Bright green (#00ff00) - Code 46
COLOR_HIGHLIGHT = "\x1B[38;5;179m" # Gold (#d7af5f) - Code 179
COLOR_DIM = "\x1B[2m\x1B[38;5;244m" # Dim gray (#808080) - Code 244
COLOR_BOLD = "\x1B[1m"              # Bold text
COLOR_RESET = "\x1B[0m"             # Reset all formatting

# Icons
ICON_ERROR = "✗"                    # Error icon (U+2717)
ICON_WARNING = "⚠"                  # Warning icon (U+26A0)
ICON_INFO = "ｉ"                    # Info icon (full-width i, U+FF49)
ICON_SUCCESS = "✔"                  # Success icon (heavy checkmark, U+2714)
```

**✅ CORRECT - Always reset color after colored text**:

```python
print(f"{COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET} SSH: Available and usable")
```

**❌ INCORRECT - Don't use hardcoded color codes**:

```python
print("\x1B[32m✓ SSH: Available")  # Use COLOR_SUCCESS constant instead
```

**❌ INCORRECT - Don't forget to reset color**:

```python
print(f"{COLOR_SUCCESS}{ICON_SUCCESS} SSH: Available")  # Missing COLOR_RESET
```

#### **2. :: Icon Usage and Formatting**

**✅ CORRECT - Success messages use green with ✔ icon and space after icon**:

```python
print(f"{COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET} GitHub CLI: Installed and authenticated")
print(f"{COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET} SSH: Available and usable")
print(f"{COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET} Git Config: Name='{name}', Email='{email}'")
```

**✅ CORRECT - Warning messages use yellow with ⚠ icon, space after icon, and blank line above**:

```python
# Warning messages MUST have blank line above and entire line colored yellow
print()  # Blank line above warning
print(f"{COLOR_WARNING}{ICON_WARNING} GitHub CLI: Installed but not authenticated{COLOR_RESET}")
print(f"{COLOR_WARNING}{ICON_WARNING} SSH: Keys exist but connection failed{COLOR_RESET}")
print(f"{COLOR_WARNING}{ICON_WARNING} Git-Crypt: Installed but not configured{COLOR_RESET}")
```

**❌ INCORRECT - Don't color only the warning icon**:

```python
# Wrong: Only icon is yellow, text is default color
print(f"{COLOR_WARNING}{ICON_WARNING}{COLOR_RESET} GitHub CLI: Installed but not authenticated")

# Wrong: Missing blank line above warning
print(f"{COLOR_WARNING}{ICON_WARNING} Warning message{COLOR_RESET}")
```

**✅ CORRECT - Error messages use red with ✗ icon and space after icon**:

```python
print(f"{COLOR_ERROR}{ICON_ERROR}{COLOR_RESET} GitHub CLI: Not installed")
print(f"{COLOR_ERROR}{ICON_ERROR}{COLOR_RESET} SSH: Not available")
print(f"{COLOR_ERROR}{ICON_ERROR}{COLOR_RESET} Git Config: Not configured")
```

**✅ CORRECT - Info messages use blue with ｉ icon (icon is BOLD, text is normal, NO SPACE after icon)**:

```python
# Info icon (ｉ) is BOLD, rest of text is normal weight
# CRITICAL: Info icon has NO SPACE after it (unlike other icons)
info_icon = f"{COLOR_BOLD}{COLOR_INFO}{ICON_INFO}{COLOR_RESET}"
info_text = f"{COLOR_INFO}INFO: This is an info message{COLOR_RESET}"
print(f"  {info_icon}{info_text}")

# Or as a single formatted string:
print(f"  {COLOR_BOLD}{COLOR_INFO}{ICON_INFO}{COLOR_RESET}{COLOR_INFO}INFO: This is an info message{COLOR_RESET}")

# Example output: ｉINFO: This is an info message
#                  ^ bold blue (no space)  ^ normal blue
```

**❌ INCORRECT - Don't use wrong icons or formatting**:

```python
# Wrong: Using regular checkmark instead of heavy checkmark
print(f"{COLOR_SUCCESS}✓{COLOR_RESET} ...")  # Use ICON_SUCCESS (✔) not ✓

# Wrong: Info icon not bold
print(f"{COLOR_INFO}{ICON_INFO}INFO: message{COLOR_RESET}")  # Icon must be bold

# Wrong: Entire info message bold
print(f"{COLOR_BOLD}{COLOR_INFO}{ICON_INFO}INFO: message{COLOR_RESET}")  # Only icon should be bold

# Wrong: Adding space after info icon
print(f"{COLOR_BOLD}{COLOR_INFO}{ICON_INFO} {COLOR_RESET}{COLOR_INFO}INFO: message{COLOR_RESET}")  # Info icon has NO SPACE
```

#### **3. :: Icon Spacing Rules**

**✅ CORRECT - Icon spacing specifications**:

- **ERROR icon (✗)**: Space after icon - `{ICON_ERROR} {text}`
- **WARNING icon (⚠)**: Space after icon - `{ICON_WARNING} {text}`
- **SUCCESS icon (✔)**: Space after icon - `{ICON_SUCCESS} {text}`
- **INFO icon (ｉ)**: NO SPACE after icon - `{ICON_INFO}{text}` (icon directly adjacent to text)

**✅ CORRECT - Info icon spacing example**:

```python
# Correct: Info icon with no space
info_icon = f"{COLOR_BOLD}{COLOR_INFO}{ICON_INFO}{COLOR_RESET}"
info_text = f"{COLOR_INFO}INFO: Message{COLOR_RESET}"
print(f"  {info_icon}{info_text}")  # No space between icon and text

# Wrong: Info icon with space
print(f"  {COLOR_BOLD}{COLOR_INFO}{ICON_INFO} {COLOR_RESET}{COLOR_INFO}INFO: Message{COLOR_RESET}")  # Has space - incorrect
```

**❌ INCORRECT - Wrong icon spacing**:

```python
# Wrong: Info icon with space (like other icons)
print(f"{COLOR_INFO}{ICON_INFO} {COLOR_RESET}INFO: Message")  # Info icon should have NO SPACE

# Wrong: Other icons without space
print(f"{COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET}Message")  # Success icon should have SPACE
```

#### **4. :: Message Type Color Mapping**

**✅ CORRECT - Success messages use green with ✔ icon**:

```python
# Fully working/configured items
print(f"{COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET} SSH: Available and usable")
print(f"{COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET} GitHub CLI: Installed and authenticated")
print(f"{COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET} Git Config: Name='{name}', Email='{email}'")
```

**✅ CORRECT - Warning messages use yellow with ⚠ icon**:

```python
# Partially configured or needs attention
print()  # Blank line above warning
print(f"{COLOR_WARNING}{ICON_WARNING} GitHub CLI: Installed but not authenticated{COLOR_RESET}")
print(f"{COLOR_WARNING}{ICON_WARNING} SSH: Keys exist but connection failed{COLOR_RESET}")
print(f"{COLOR_WARNING}{ICON_WARNING} Git-Crypt: Installed but not configured{COLOR_RESET}")
```

**✅ CORRECT - Error messages use red with ✗ icon**:

```python
# Not installed or needs setup
print(f"{COLOR_ERROR}{ICON_ERROR}{COLOR_RESET} GitHub CLI: Not installed")
print(f"{COLOR_ERROR}{ICON_ERROR}{COLOR_RESET} SSH: Not available")
print(f"{COLOR_ERROR}{ICON_ERROR}{COLOR_RESET} Git Config: Not configured")
```

**✅ CORRECT - Info messages use blue with ｉ icon (bold icon, normal text, no space)**:

```python
# Informational messages - icon is bold, text is normal, NO SPACE after icon
info_icon = f"{COLOR_BOLD}{COLOR_INFO}{ICON_INFO}{COLOR_RESET}"
info_text = f"{COLOR_INFO}INFO: This is an info message{COLOR_RESET}"
print(f"  {info_icon}{info_text}")

# Example output: ｉINFO: This is an info message
#                  ^ bold blue (no space)  ^ normal blue
```

**✅ CORRECT - Highlight messages use gold color**:

```python
print(f"{COLOR_HIGHLIGHT}Highlight: Important information{COLOR_RESET}")
```

**✅ CORRECT - Dim text for secondary information**:

```python
print(f"{COLOR_DIM}Dim text: Secondary or less important information{COLOR_RESET}")
```

**❌ INCORRECT - Don't mix colors and icons**:

```python
print(f"{COLOR_SUCCESS}{ICON_ERROR}{COLOR_RESET} ...")  # Wrong: green with error icon
print(f"{COLOR_ERROR}{ICON_SUCCESS}{COLOR_RESET} ...")  # Wrong: red with success icon
print(f"{COLOR_INFO}{ICON_WARNING}{COLOR_RESET} ...")    # Wrong: blue with warning icon
```

### **Header and Banner Colors**

#### **1. :: Header Color Styles**

**✅ CORRECT - Header colors use ANSI 256-color codes**:

```python
# Header colors (ANSI 256-color codes)
MAIN_TITLE_COLOR = "\x1B[38;5;51m"      # Bright cyan (#00ffff) - Code 51 - Super Vibrant
SUB_HEADER_COLOR = "\x1B[38;5;33m"     # Bright blue (#0087ff) - Code 33 - Vibrant
HEADER_FAT_COLOR = "\x1B[38;5;144m"    # Warm gray (#afaf87) - Code 144 - For main sub section headers
HEADER_MINOR_COLOR = "\x1B[38;5;187m" # Beige (#d7d7af) - Code 187 - For minor sub section headers
HIGHLIGHT_COLOR = "\x1B[38;5;179m"     # Gold (#d7af5f) - Code 179
DIM_TEXT_COLOR = "\x1B[2m\x1B[38;5;244m" # Dim gray (#808080) - Code 244
```

#### **2. :: Header Specifications**

**✅ CORRECT - Standard header format (most common)**:

```python
# Standard header: Minor Sub Section Header
# Format: ┌─ {title} ────────────────────────────────────
# Width: 75 total characters
# Color: Beige (#d7d7af, code 187)
# Usage: Default header format for most sections
# Note: Header creation is generally handled by the indenter package
```

**✅ CORRECT - Main Sub Section Header (for nested sections)**:

```python
# Main Sub Section Header: Used when multiple sections need to be nested under a primary header
# Format: ┏━ {title} ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Width: 75 total characters
# Color: Warm gray (#afaf87, code 144)
# Usage: Primary header when nesting multiple minor sections underneath
```

**✅ CORRECT - Nested header structure**:

```python
# When multiple sections need nesting:
# 1. Main Sub Section Header (┏━) with 75 width - Warm gray
# 2. Minor Sub Section Headers (┌─) with 65 width - Beige (nested under main)
# 3. Additional Minor Sub Section Headers (┌─) with 65 width - Beige

# Example structure:
# ┏━ Main Sub Section Header ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ (75 width, warm gray)
# ┌─ Minor Sub Section Header ──────────────────────────────────── (65 width, beige)
# ┌─ Minor Sub Section Header ──────────────────────────────────── (65 width, beige)
```

**✅ CORRECT - Header creation note**:

```python
# Header creation is generally handled by the indenter package
# Only specify header format manually when indenter package is not being used
# or when custom header formatting is explicitly required
```

**❌ INCORRECT - Don't use wrong header colors**:

```python
# Wrong: Using error color for headers
write_header_fat("Header", color=COLOR_ERROR)  # Don't use message colors for headers

# Wrong: Using header colors for status messages
print(f"{HEADER_FAT_COLOR}Error message{COLOR_RESET}")  # Use COLOR_ERROR instead
```

#### **3. :: Header Color Specifications**

**Header Color Reference**:

- **MAIN_TITLE**: Bright cyan (#00ffff, ANSI code 51) - Super vibrant, for top-level banners
- **SUB_HEADER**: Bright blue (#0087ff, ANSI code 33) - Vibrant, for secondary headers
- **HEADER_FAT**: Warm gray (#afaf87, ANSI code 144) - Neutral, readable, for main sub section headers (75 width)
- **HEADER_MINOR**: Beige (#d7d7af, ANSI code 187) - Light neutral, for minor sub section headers (75 width standard, 65 width when nested)
- **HIGHLIGHT**: Gold (#d7af5f, ANSI code 179) - Warm accent, for important information
- **DIM_TEXT**: Dim gray (#808080, ANSI code 244) - Reduced intensity, for secondary information

**Color Selection Rationale**:

- Header colors are distinct from message colors (error/warning/info/success) to avoid confusion
- Warm gray and beige provide neutral, readable options that don't compete with status messages
- Header colors maintain visual hierarchy: cyan (brightest) → blue → warm gray → beige (most subtle)

## **FORMATTING PATTERNS**

### **1. :: Status Report Format**

**✅ CORRECT - Status reports use colored icons**:

```python
if ssh_status.get("usable", False):
    print(f"  {COLOR_SUCCESS}{ICON_SUCCESS}{COLOR_RESET} SSH: Available and usable")
elif ssh_status.get("available", False):
    print(f"  {COLOR_WARNING}{ICON_WARNING}{COLOR_RESET} SSH: Available but not usable")
else:
    print(f"  {COLOR_ERROR}{ICON_ERROR}{COLOR_RESET} SSH: Not available")
```

**✅ CORRECT - Info message with correct spacing**:

```python
# Info icon has NO SPACE after it
info_icon = f"{COLOR_BOLD}{COLOR_INFO}{ICON_INFO}{COLOR_RESET}"
info_text = f"{COLOR_INFO}INFO: Connection established{COLOR_RESET}"
print(f"  {info_icon}{info_text}")
```

## **ANTI-PATTERNS**

### **❌ Color and Icon Violations**

- ❌ **Missing Color Reset** - Always reset color after colored text
- ❌ **Wrong Icon Colors** - Don't use green with error icons or red with success icons
- ❌ **Hardcoded Colors** - Use color constants, not hardcoded ANSI codes
- ❌ **Wrong Info Icon Formatting** - Info icon (ｉ) must be bold, text must be normal weight
- ❌ **Wrong Icon Characters** - Use ✔ (U+2714) not ✓, use ｉ (U+FF49) not i
- ❌ **Info Icon Spacing** - Info icon (ｉ) must have NO SPACE after it (unlike other icons)
- ❌ **Warning Without Blank Line** - Always add blank line (`print()`) above warning messages
- ❌ **Warning Icon Only Colored** - Apply COLOR_WARNING to entire warning line (icon + text), not just icon

### **❌ Header Color Violations**

- ❌ **Wrong Header Colors** - Don't use message colors (error/warning/info/success) for headers
- ❌ **Wrong Message Colors** - Don't use header colors for status messages

## **QUALITY GATES**

- [ ] **Color Consistency**: All status messages use correct color/icon combinations
- [ ] **Color Reset**: All colored text is followed by COLOR_RESET
- [ ] **Icon Usage**: Success uses ICON_SUCCESS (✔), warnings use ICON_WARNING (⚠), errors use ICON_ERROR (✗), info uses ICON_INFO (ｉ)
- [ ] **Info Icon Formatting**: Info icon (ｉ) is bold, info text is normal weight
- [ ] **Info Icon Spacing**: Info icon (ｉ) has NO SPACE after it (unlike other icons which have space)
- [ ] **Warning Formatting**: Warnings have blank line above and entire line colored yellow
- [ ] **Header Colors**: Headers use correct colors (warm gray for main, beige for minor)
- [ ] **Header Widths**: Standard header is 75 width, nested minor headers are 65 width

## **SUCCESS METRICS**

After implementing proper terminal output formatting:

- ✅ **Color-Coded Status** - Success/warning/error clearly distinguished
- ✅ **Professional Appearance** - Clean, readable terminal output
- ✅ **Consistent Icon Spacing** - Info icon has no space, other icons have space
- ✅ **Correct Header Formatting** - Headers use appropriate colors and widths
